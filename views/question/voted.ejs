<% if (!true) { %> <div><%- partial ('../helpers/modal-sign-in.ejs') %></div> <% } %>

<div class="topper">
  <img src="/images/gt.png" class="gt-logo"/>
</div>
<div class="container" style="min-height:80vh">
    <div class="row">
      <div class="one-half column" style="margin-top: 25%">
        <h4>The Greater Than Challenge</h4>
        <p>Every week we release three minimlaist re-designs of a classic NHL logo. Now we need you to tell us which design is the best! Vote to tell us which logo is <b>greater than</b> the others</p>
        <a href="#designs" class="button">See the designs</a>
      </div>
      <div class="one-half column gt-badge" style="">
        <img alt="" src="/images/Toronto_Maple_Leafs_logo.svg" width="300" height="300" data-file-width="1939" data-file-height="1939">
        <h6>week four<br/><b>Toronto Maple Leafs</b></h6>
      </div>
    </div>
  </div>
<div class="main clearfix" style="margin-top: 10%; background:#f5f5f5" id="designs">
  <div class="container burger-buns">
  <% if (question.title) { %>
    <h6>This Week's Designs</h6>
    <div class="row u-full-width gt-design-container">
    <% answers.forEach(function (answer, index) { %>
      <div class="one-third column ballot">
        <div class="thumbnail">
          <img class="u-max-full-width" src="/images/w4design<%- index %>.jpg">
        </div>
        <a href="<%- 'answer/' + answer.id %>" class="button button-primary">Vote</a>
      </div>
    <% }) %>
    </div>
    <p class="footer">• The order of designs is not related to the order of designers below •</p>
    <% } else { %>
    <h6>Thank you for voting! Check back next Thursday for another NHL logo re-design.</h6>
    <div class="row u-full-width">
      <div class="one-third column ballot">
        <div class="thumbnail">
          <img class="u-max-full-width" src="/images/w4design0.jpg">
        </div>
      </div>
      <div class="one-third column ballot">
        <div class="thumbnail">
          <img class="u-max-full-width" src="/images/w4design1.jpg">
        </div>
      </div>
      <div class="one-third column ballot">
        <div class="thumbnail">
          <img class="u-max-full-width" src="/images/w4design2.jpg">
        </div>
      </div>
      </div>
  <% } %>
  </div>
</div>
<div class="clearfix">
  <div class="container burger-buns">
        <h6>Past Designs</h6>
        <h6 class="gt-past-designs">
          <a href="#designw1">EDM</a>
          <a href="#designw2">BUF</a>
          <a href="#designw3">ARI</a>
          <a href="#designw4">TOR</a>
          <a href="#designw5">CAR</a>
          <a href="#designw6">NJD</a>
          <a href="#designw7">PHI</a>
          <a href="#designw8">CBJ</a>
          <a href="#designw9">SJS</a>
          <a href="#designw10">COL</a>
          <a href="#designw11">FLA</a>
          <a href="#designw12">DAL</a>
          <a href="#designw13">LAK</a>
          <a href="#designw14">BOS</a>
          <a href="#designw15">CGY</a>
          <a href="#designw16">PIT</a>
          <a href="#designw17">WPG</a>
          <a href="#designw18">OTT</a>
          <a href="#designw19">DET</a>
          <a href="#designw20">MIN</a>
          <a href="#designw21">NYI</a>
          <a href="#designw22">WSH</a>
          <a href="#designw23">VAN</a>
          <a href="#designw24">NSH</a>
          <a href="#designw25">STL</a>
          <a href="#designw26">MTL</a>
          <a href="#designw27">ANA</a>
          <a href="#designw28">NYR</a>
          <a href="#designw29">TBL</a>
          <a href="#designw30">CHI</a>
        </h6>
      <div class="row u-full-width gt-results">
        <div class="one-third column gt-one">
          <img class="last-week-img winner u-max-full-width" src="/images/w3design2.jpg">
          <p class="title">Landon</p>
        </div>
        <div class="one-third column gt-two">
          <img class="last-week-img runner-up u-max-full-width" src="/images/w3design0.jpg">
          <p class="title">Austin</p>
        </div>
        <div class="one-third column">
          <img class="last-week-img runner-up u-max-full-width" src="/images/w3design1.jpg">
          <p class="title">Isaac</p>
        </div>
      </div>

      <hr>

    <h6>The Designers</h6>
    <div class="row u-full-width">
      <div class="one-third column">
        <img class="img-circle portrait u-max-full-width" src="/images/landon.jpg">
        <p class="title">Landon</p>
      </div>
      <div class="one-third column">
        <img class="img-circle portrait u-max-full-width" src="/images/isaac.jpg">
        <p class="title">Isaac</p>
      </div>
      <div class="one-third column">
        <img class="img-circle portrait u-max-full-width" src="/images/austin.jpg">
        <p class="title">Austin</p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>
var $root = $('html, body');
var w = 4;
var results = [
  [1, 0, 2],
  ['Austin', 'Isaac', 'Landon'],
  ['Isaac', 'Landon', 'Austin'],
  ['Landon', 'Austin', 'Isaac']
]

function showPastDesigns(week) {
  $('.gt-past-designs a').each( function(index) {
    if (week == index + 1) {
      $(this).addClass("active");
    } else if (index < w) {
      $(this).removeClass("active").addClass("gt-designed");
    } else {
      return false;
    }
  });
  var count = results[0][week-1];
  $('.gt-results .column').each( function(index) {
    $(this).find('p.title').text(results[week][index]);
    $(this).find('img.last-week-img').attr('src', '/images/w'+week+'design'+count+'.jpg')
    if (2 < ++count) {
      count = 0;
    }
  });
}

$('a').click(function() {
    var href = $.attr(this, 'href');
    if (href == ('#designw' + w)) {
      href = "#designs"
    }
    if (href.startsWith('#designw')) {
      var desiredWeek = href.replace('#designw', '');
      if (!$(this).hasClass('active') && desiredWeek <= w) {
        showPastDesigns(desiredWeek);
      }
    } else {
      $root.animate({
          scrollTop: $( href ).offset().top
      }, 500);
    }
    return false;
});

showPastDesigns(w-1);
</script>

<% if (!question.title) { %>
<script>
var $root = $('html, body');
$root.animate({
    scrollTop: $( '#designs' ).offset().top
}, 0);

swal("Thank you for voting!", "Check back next Thursday for another NHL logo re-design!", "success")
</script>
<% } %>